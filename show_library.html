<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="content-type" content="text/html; charset=UTF-8">
        <meta name="robots" content="noindex, nofollow">
        <meta name="googlebot" content="noindex, nofollow">
    
        <style type="text/css">
             #map_canvas {
                height: 900px;
                width: 100%;
            }
        </style>
        <title>Parzival</title>
    </head>
    
 <body>    
     <div id="map_canvas"></div>
     
<script type='text/javascript'>
                        

function get_url_param( name )
{
	name = name.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");

	var regexS = "[\\?&]"+name+"=([^&#]*)";
	var regex = new RegExp( regexS );
	var results = regex.exec( window.location.href );

	if ( results == null )
		return "";
	else
		return results[1];
};

window.onload = function() {
                var locations = [
                    ['St. Gallen', 47.42318, 9.376831, 'St. Gallen', 'http://www.google.com']
  //                  ['Wien', 48.205875, 16.366904, 'Wien', 'http://www.facebook.com']
               ];
                var map;
                var markers = [];

                var latitude = get_url_param('lat');
                var longitude = get_url_param('lng');
                var library = get_url_param('lib');
                var linkurl = get_url_param('url');                 
                var position = {
                    lat: parseFloat(latitude),
                    lng: parseFloat(longitude)
                 }
 
                
                //var myLatLng = { lat: 47.42318, lng: 9.376831 };
                //document.writeln ('Latitude: ' + latitude);
                //document.writeln ('Longitude: ' + longitude);
                //document.writeln('Library: ' + library);
                //document.writeln('Linkurl: ' + linkurl);
                //document.writeln('MyLatLng: ' + string(myLatLng);

                function init() {
                    map = new google.maps.Map(document.getElementById('map_canvas'), {
                        zoom: 5,
                        //center: new google.maps.LatLng(-33.92, 151.25),
                        center: new google.maps.LatLng( latitude, longitude),
                        mapTypeId: google.maps.MapTypeId.ROADMAP
                    });

 
                    //for (var i = 0; i < num_markers; i++) {
                    markers[0] = new google.maps.Marker({
                            
                            position: position,
                            map: map,
                            title: library,
                            html: library,
                            url: linkurl,
                            id: 0,
                        });

                        google.maps.event.addListener(markers[0], 'click', function() {
                        window.open(this.url);
                      
                        });
                   //}
                }

                init();
            } 
    </script>
                    
                    
   // </head>
    
 //   <body>
        <script src="https://maps.googleapis.com/maps/api/js?callback=initMap"></script>
 //       <div id="map_canvas"></div>
        
    </body>
    
</html>
